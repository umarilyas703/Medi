<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>VIDEO STREAMING</h1>
    <img 
        id="video-strem"
        src=""
    />
    <script defer>
        function getURL(){
            const url = "http://192.168.10.15:8000/get_frame?RTSP=" + encodeURIComponent("rtsp://admin:admin1234@192.168.10.20:554/cam/realmonitor?channel=1&subtype=0&unicast=true&proto=Onvif");
            console.log(url); 
            document.getElementById('video-strem').setAttribute('src',url);
            return url;
        }
        // const API = "http://192.168.10.6:8000/get_frame"
        // const body = {
        //     RTSP:"rtsp://admin:admin1234@192.168.10.20:554/cam/realmonitor?channel=1&subtype=0&unicast=true&proto=Onvif"
        // }
        // const data = {
        //     method:'POST',
        //     body:JSON.stringify(body),
        //     mode: 'no-cors',
        //     header:{
        //         "Content-Type":"multipart/x-mixed-replace; boundary=frame"
        //     }
        // }
        // fetch(API,data).then(res=>res.blob()).then(result=>{
        //     console.log(result);
        //     document.getElementById('video-strem').setAttribute('src',result);
        // }).catch(err=>{
        //     console.log(err);
        // });
            getURL();
        </script>

</body>
</html>